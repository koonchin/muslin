{% extends 'base.html' %}
<!doctype html>
<html lang="en">

<head>
    {% block content %}
    <title>TABLE</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="stylesheet" href="/media/style.css?{% now " U " %}">
    <style>
        .box {
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            opacity: .9;
        }
        
        .margin {
            margin-top: 0px;
            margin-bottom: 0px;
            margin-right: 0px;
            margin-left: 20px;
        }
        .form-check{
            display:inline-block; 
        }
    </style>
</head>

<body>

    <form method="post" action="/page/">
        {% csrf_token %}
<div class="input-group mb-3" style="margin-left:-5vmax;width:75vmax;height:3vmax;">
            <span class="input-group-text" id="inputGroup-sizing-sm" style="font-size: 1.5vmax;width: 7vw;text-align: center;">รหัส SKU</span>
            <input style="font-size: 2vmax;" type="text" class="form-control" aria-label="Sizing example input" id="sku" name="sku">
            <span class="input-group-text" id="inputGroup-sizing-sm" style="font-size: 1.5vmax;width: 7vw;">รายละเอียด</span>
            <input style="font-size: 2vmax;" type="text" class="form-control" aria-label="Sizing example input" id="name" name="name">
</div>

        <div class="form-inline dropdown" style="margin-top: 2vh;margin-left:-5vmax;">
            <div class="input-group mb-3" style="width:75vmax;margin-top:3vmax;">
                <span class="input-group-text">อก</span>
                <input type="text" class="form-control" placeholder="น้อยสุด" aria-label="Username" id="breastmin" name="breastmin" value = {{ breastmin }}>
                <input type="text" class="form-control" placeholder="มากสุด" aria-label="Username" id="breastmax" name="breastmax" value = {{ breastmax }}>
                <span class="input-group-text">เอว</span>
                <input type="text" class="form-control" placeholder="น้อยสุด" aria-label="Server" id="wrestmin" name="wrestmin" value = {{ wrestmin }}>
                <input type="text" class="form-control" placeholder="มากสุด" aria-label="Server" id="wrestmax" name="wrestmax" value = {{ wrestmax }}>
                <span class="input-group-text">สะโพก</span>
                <input type="text" class="form-control" placeholder="น้อยสุด" aria-label="Server" id="hipmin" name="hipmin" value= {{ hipmin }}>
                <input type="text" class="form-control" placeholder="มากสุด" aria-label="Server" id="hipmax" name="hipmax" value = {{ hipmax }}>
            </div>
        </div>
        <div class="form-check">
            <select id="size" name="size" class="form-control" style="margin-left:-7vmax;height: 7vh;font-size: 2vmax;width: 8vw;text-align: center;margin-right:3vmax;display:inline-block;">
                <span style="font-size: 2vmax;">
                <option value="1">SIZE ▼</option>
                <option value="2">S</option>
                <option value="3">M</option>
                <option value="4">L</option>
                <option value="5">XL</option>
                <option value="6">2XL</option>
                <option value="7">3XL</option>
            </span>
                </select>

                <div class="form-check form-switch">
                    <input class="form-check-input" style="width:8vmax;height:4vmax;" type="checkbox" id="flexSwitchCheckChecked" name="checkSKU">
                    <label class="form-check-label" style="font-size:2.4vmax;margin-left:3vmax;" value="checkSKU">ดาวน์โหลดรูป</label>
                </div>
        <button id="downloads" name="downloads" type="button " class="btn btn-primary " style="width: 20vw;font-size: 2.5vmax;height: 8vh;margin-left:17vmax;">ยืนยัน</button>
        </div>
    </form>
    <table class="table table-striped box table-sortable" style="width: 100%;font-size: 1.5vmax; margin-left: -10%;height:1vh;" >
        <thead>
            <tr style="padding-left: 150%;letter-spacing: 0.3rem;text-align:center;">
                <th scope="col ">#</th>
                <th scope="col ">SKU</th>
                <th scope="col ">NAME</th>
                <th scope="col ">AMOUNT</th>
                <th scope="col ">SIZE</th>
                <th scope="col ">DESCRIPTS</th>
                <th scope="col ">IMAGE</th>
            </tr>
        </thead>
        <tbody>
            {% for d1,d2,d3,d4,d5,d6,index in data %}
            <tr style="text-align:center;">
                <td scope="row ">{{ index }}</td>
                <td>
                    {{d1}}
                </td>
                <td>
                    {{d2}}
                </td>
                <td>
                    {{d3}}
                </td>
                <td>
                    {{d4}}
                </td>
                <td>
                    <div id='{{ d1 }}' style="display: none;height:10vmax;">{{ d6 }}</div>
                        {% if d6 != ''%}
                        <div class="popup" onclick="show_popup('popup{{ d1 }}')">
                            <input type="image" src="/media/info.png" style="height:4vmax;width:4vmax;" id="popoverData" data-trigger="hover"/>
                              <span class="popuptext" id="popup{{ d1 }}">{{ d6 }}</span>
                        </div>
                        <div class="popup" onclick="CopyToClipboard('{{ d1 }}')">
                            <input id="i{{ d1 }}" type="image" src="/media/copy.png" style="height:4vmax;width:4vmax;"/>
                              <span class="popuptext" id="popup2{{ d1 }}">COPY</span>
                        </div>
                    {% comment %} <button onclick="CopyToClipboard('{{ d6 }}');return false;" id="{{ d6 }}" class="copy"></button> {% endcomment %}
                        {% endif %}
                </td>
                <td>
                {% if  d5 != 'None' %}
                <img class="myImg" id="img{{ d1 }}" src="{{ d5 }}" alt="{{ d1 }}" style="width:5vmax;height:5vmax;" onclick="show_image('img{{ d1 }}')">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">
                    <span class="close">&times;</span>
                    <img class="modal-content" id="img01">
                    <div id="caption"></div>
                    </div>
                {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
<script>
// Get the modal
function show_image(id){
var modal = document.getElementById("myModal");

// Get the image and insert it inside the modal - use its "alt" text as a caption
var img = document.getElementById(id);
var modalImg = document.getElementById("img01");
var captionText = document.getElementById("caption");
modal.style.display = "block";
modalImg.src = img.src;
captionText.innerHTML = img.alt;
// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() { 
  modal.style.display = "none";
}
}
</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js " integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13 " crossorigin="anonymous "></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js " integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p " crossorigin="anonymous "></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js " integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB " crossorigin="anonymous "></script>

    <script>
        function show_popup(id) {
            var popup = document.getElementById(id);
            popup.classList.toggle("show");
            }        
        function CopyToClipboard(id) {
            var r = document.createRange();
            document.getElementById("i"+id).src = '/media/copy2.png';
            document.getElementById(id).style.display = "block";
            r.selectNode(document.getElementById(id));
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(r);
            document.execCommand('copy');
            window.getSelection().removeAllRanges();
            document.getElementById(id).style.display = "none";
            show_popup("popup2"+id);
            setTimeout(function(){ document.getElementById("i"+id).src = '/media/copy.png';document.getElementById("popup2"+id).classList.toggle("show"); }, 1000);
            
        }
    </script>
    <script src="/media/sort.js"></script>
    {% endblock content %}
</body>